<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-learn/cross-chain/architecture/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Architecture | AELF Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.aelf.com/img/aelficon.png"><meta data-rh="true" name="twitter:image" content="https://docs.aelf.com/img/aelficon.png"><meta data-rh="true" property="og:url" content="https://docs.aelf.com/learn/cross-chain/architecture/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture | AELF Docs"><meta data-rh="true" name="description" content="aelf&#x27;s cross-chain system architecture"><meta data-rh="true" property="og:description" content="aelf&#x27;s cross-chain system architecture"><link data-rh="true" rel="icon" href="favicon.ico"><link data-rh="true" rel="canonical" href="index.html.1.58.html"><link data-rh="true" rel="alternate" href="index.html.1.58.html" hreflang="en"><link data-rh="true" rel="alternate" href="index.html.1.58.html" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="AELF Docs" href="opensearch.xml">
<link rel="stylesheet" href="katex.min.css"><link rel="stylesheet" href="styles.a7c8ffc1.css">
<script src="runtime~main.1b1204e5.js" defer="defer"></script>
<script src="main.6846e719.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="index.html.1.58.html#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="index.html"><div class="navbar__logo"><img src="Logo.aelf.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="Logo.aelf.white.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="index.html.1.html">Quick Start</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="index.html.1.1.html">Learn</a><a class="navbar__item navbar__link" href="index.html.1.2.html">Tools</a><a class="navbar__item navbar__link" href="index.html.1.3.html">Playground</a><a class="navbar__item navbar__link" href="index.html.1.4.html">Resources</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.aelf.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/AElfProject" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ntye" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="index.html.1.1.html">Understanding aelf</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="index.html.1.14.html">Core</a><button aria-label="Expand sidebar category &#x27;Core&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="index.html.1.15.html">Cross Chain</a><button aria-label="Collapse sidebar category &#x27;Cross Chain&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.57.html">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="index.html.1.58.html">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.59.html">Cross Chain Verification</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.60.html">Verify</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.61.html">Cross Chain Transfer</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.16.html">Consensus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.17.html">Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.18.html">Boot Sequence</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.19.html">Addresses</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.20.html">Transactions</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="index.html.1.21.html">Smart Contract</a><button aria-label="Expand sidebar category &#x27;Smart Contract&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="index.html.1.22.html">ACS</a><button aria-label="Expand sidebar category &#x27;ACS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link" href="index.html.1.46.html">Tutorials</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="index.html.1.47.html">For Developers</a><button aria-label="Expand sidebar category &#x27;For Developers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="index.html.1.23.html">For Node Operators</a><button aria-label="Expand sidebar category &#x27;For Node Operators&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="index.html"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="index.html.1.1.html"><span itemprop="name">Understanding aelf</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="index.html.1.15.html"><span itemprop="name">Cross Chain</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Side Chain and Main Chain Node Documentation</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview" href="index.html.1.58.html#overview">​</a></h2>
<p>Conceptually, a side chain node and a main chain node are similar. Both are independent blockchains with their own peer-to-peer networks and possibly their own ecosystems. This setup can be implemented at multiple levels. In terms of peer-to-peer networks, all side chains operate in parallel to each other but are linked to a main chain node through a cross-chain communication mechanism.</p>
<p>Through this link, messages are exchanged, and indexing is performed to ensure that transactions from the main chain or other side chains are verifiable in the side chain. Implementers can use aelf libraries and frameworks to build these chains.</p>
<p><strong>Key Role of the Main Chain:</strong></p>
<ul>
<li>The main chain&#x27;s primary purpose is to index the side chains.</li>
<li>Only the main chain indexes data about all the side chains.</li>
<li>Side chains are independent and do not have knowledge about each other.</li>
<li>When side chains need to verify transactions from other chains, they use the main chain as a bridge to provide cross-chain verification information.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="node-level-architecture">Node Level Architecture<a class="hash-link" aria-label="Direct link to Node Level Architecture" title="Direct link to Node Level Architecture" href="index.html.1.58.html#node-level-architecture">​</a></h2>
<p>In the current architecture, both the side chain node and the main chain node have one server and exactly one client. This forms the basis for aelf&#x27;s two-way communication between the main chain and side chains. Both the server and the client are implemented as node plugins (a node has a collection of plugins). Interaction (listening and requesting) can start once both nodes are running.</p>
<p><img decoding="async" loading="lazy" alt="Node Level Architecture" src="side-chain-nodes-b6f55c4ff3047244d2f5ee3713d47832.png" width="1152" height="864" class="img_ev3q"></p>
<p>The diagram above illustrates two nodes run by an entity: one main chain node and one side chain node. Note that the nodes don&#x27;t have to be in the same physical location.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="side-chain-lifetime">Side Chain Lifetime<a class="hash-link" aria-label="Direct link to Side Chain Lifetime" title="Direct link to Side Chain Lifetime" href="index.html.1.58.html#side-chain-lifetime">​</a></h3>
<p>The lifetime of a side chain involves the following steps:</p>
<ul>
<li><strong>Request side chain creation.</strong></li>
<li><strong>Wait for acceptance on the main chain.</strong></li>
<li><strong>Start and initialize the side chain.</strong> It will be indexed by the main chain automatically.</li>
<li><strong>Cross-chain verification</strong> is allowed only if the side chain is indexed correctly.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="communication">Communication<a class="hash-link" aria-label="Direct link to Communication" title="Direct link to Communication" href="index.html.1.58.html#communication">​</a></h3>
<p>When the side chain node starts, it will initiate various communications. Here are the main points of the protocol:</p>
<ul>
<li><strong>Initial Request:</strong> When the side chain node starts for the first time, it will request the main chain node for a chain initialization context.</li>
<li><strong>Handshake:</strong> After initialization, the side chain is launched and will perform a handshake with the main chain node to signal that it is ready to be indexed.</li>
<li><strong>Indexing Process:</strong> During indexing, information about irreversible blocks will be exchanged between the side chain and the main chain. The main chain will write the final result in a block, which is calculated using the cross-chain data from all side chains. The side chain will also record the data in a contract from the main chain.</li>
</ul>
<p>aelf provides cross-chain communication implementation using gRPC.</p>
<div class="language-protobuf codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-protobuf codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RequestIndexingFromParentChain</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CrossChainRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">stream</span><span class="token plain"> </span><span class="token class-name">acs7.ParentChainBlockData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">rpc</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">RequestIndexingFromSideChain</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token class-name">CrossChainRequest</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">returns</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">stream</span><span class="token plain"> </span><span class="token class-name">acs7.SideChainBlockData</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cache">Cache<a class="hash-link" aria-label="Direct link to Cache" title="Direct link to Cache" href="index.html.1.58.html#cache">​</a></h3>
<p>For effective indexing, a cache layer is used to store cross-chain data received from remote nodes, ensuring the data is available and correct. The cross-chain data is cached by chain ID and block height with a count limit. The cache layer provides the data if it is cached when the node needs it, thus decoupling the communication part and node running logic.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cross-chain-contract">Cross-Chain Contract<a class="hash-link" aria-label="Direct link to Cross-Chain Contract" title="Direct link to Cross-Chain Contract" href="index.html.1.58.html#cross-chain-contract">​</a></h3>
<p>Apart from the data in blocks, most cross-chain data will be stored by the cross-chain contract. Cross-chain data cached by the node is packed into transactions during the mining process, and the calculated result is stored by the contract. The cross-chain data in the block is the result of side chain indexing calculations from this contract. Cross-chain verification can only work correctly with data from this contract.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-flow">Data Flow<a class="hash-link" aria-label="Direct link to Data Flow" title="Direct link to Data Flow" href="index.html.1.58.html#data-flow">​</a></h3>
<p>Conceptually, the node operates as described in the following diagram. The main/side chain node receives cross-chain data from the other side and stores it in local memory. The indexing transaction is packed by the miner, and the cross-chain data is written into the <code>State</code> through the <code>Crosschain Contract</code>.</p>
<p><img decoding="async" loading="lazy" alt="Data Flow" src="data:image/png;base64,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" width="511" height="296" class="img_ev3q"></p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="index.html.1.57.html"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Introduction</div></a><a class="pagination-nav__link pagination-nav__link--next" href="index.html.1.59.html"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cross Chain Verification</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="index.html.1.58.html#overview">Overview</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.58.html#node-level-architecture">Node Level Architecture</a><ul><li><a class="table-of-contents__link toc-highlight" href="index.html.1.58.html#side-chain-lifetime">Side Chain Lifetime</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.58.html#communication">Communication</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.58.html#cache">Cache</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.58.html#cross-chain-contract">Cross-Chain Contract</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.58.html#data-flow">Data Flow</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col mobile-hidden"><img src="Logo.aelf.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="Logo.aelf.white.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="col footer__col"><div class="footer__title">Platform</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aelf.com/platform" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technology<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/AElfProject/aelf-audit-reports" target="_blank" rel="noopener noreferrer" class="footer__link-item">Audit Report<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.41.html">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.42.html">Terms of Use</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.43.html">Cookie Policy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developer Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="index.html.1.html">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.1.html">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.2.html">Tools</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.3.html">Playground</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.4.html">Resources</a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aelf.com/ecosystem" target="_blank" rel="noopener noreferrer" class="footer__link-item">Overview<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aelf.com/ecosystem#ECOSYSTEM_DAPPS" target="_blank" rel="noopener noreferrer" class="footer__link-item">dApps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aelf.com/ecosystem#ECOSYSTEM_VENTURES" target="_blank" rel="noopener noreferrer" class="footer__link-item">aelf Ventures<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.aelf.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://form.aelf.com/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="wrap_IVJr"><div class="copyright_C3yV"><div class="logo_fd3v"><img src="Logo.aelf.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="Logo.aelf.white.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2024 aelf</div></div><div class="social_cKnr"><a href="https://x.com/aelfblockchain" target="_blank" rel="noopener noreferrer" title="X"><img src="X.svg" class="img_LYnW"></a><a href="https://t.me/aelfblockchain" target="_blank" rel="noopener noreferrer" title="Telegram"><img src="Telegram.svg" class="img_LYnW"></a><a href="https://discord.gg/bgysa9xjvD" target="_blank" rel="noopener noreferrer" title="Discord"><img src="Discord.svg" class="img_LYnW"></a><a href="https://github.com/AElfProject" target="_blank" rel="noopener noreferrer" title="GitHub"><img src="Github.svg" class="img_LYnW"></a></div></div></div></div></footer></div>
</body>
</html>