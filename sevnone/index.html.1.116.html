<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-resources/whitepaper-2/modular-blockchain/index" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Beyond AI - A Modular + ZK Rollup Blockchain | AELF Docs</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://docs.aelf.com/img/aelficon.png"><meta data-rh="true" name="twitter:image" content="https://docs.aelf.com/img/aelficon.png"><meta data-rh="true" property="og:url" content="https://docs.aelf.com/resources/whitepaper-2/modular-blockchain/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Beyond AI - A Modular + ZK Rollup Blockchain | AELF Docs"><link data-rh="true" rel="icon" href="favicon.ico"><link data-rh="true" rel="canonical" href="index.html.1.116.html"><link data-rh="true" rel="alternate" href="index.html.1.116.html" hreflang="en"><link data-rh="true" rel="alternate" href="index.html.1.116.html" hreflang="x-default"><link rel="search" type="application/opensearchdescription+xml" title="AELF Docs" href="opensearch.xml">
<link rel="stylesheet" href="katex.min.css"><link rel="stylesheet" href="styles.a7c8ffc1.css">
<script src="runtime~main.1b1204e5.js" defer="defer"></script>
<script src="main.6846e719.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="index.html.1.116.html#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="index.html"><div class="navbar__logo"><img src="Logo.aelf.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="Logo.aelf.white.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div></a><a class="navbar__item navbar__link" href="index.html.1.html">Quick Start</a><a class="navbar__item navbar__link" href="index.html.1.1.html">Learn</a><a class="navbar__item navbar__link" href="index.html.1.2.html">Tools</a><a class="navbar__item navbar__link" href="index.html.1.3.html">Playground</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="index.html.1.4.html">Resources</a></div><div class="navbar__items navbar__items--right"><a href="https://blog.aelf.com/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/AElfProject" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_ntye" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--active" href="index.html.1.4.html">Resources</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.34.html">Integration Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.35.html">Wallet and Block Explorer</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.36.html">AetherLink</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.37.html">Browser Extension</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.38.html">DevOps</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.39.html">Protobuf Extension</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" tabindex="0" href="index.html.1.40.html">Whitepaper 2.0</a><button aria-label="Collapse sidebar category &#x27;Whitepaper 2.0&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.110.html">Executive Summary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.111.html">Background on aelf</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.112.html">The evolving blockchain landscape</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.113.html">The AI revolution and its impact on blockchain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.114.html">aelf&#x27;s AI-enhanced architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="index.html.1.115.html">AI integration points in the aelf ecosystem</a><button aria-label="Expand sidebar category &#x27;AI integration points in the aelf ecosystem&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="index.html.1.116.html">Beyond AI - A Modular + ZK Rollup Blockchain</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.117.html">Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.118.html">References and further readings</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.49.html">Whitepaper 1.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="index.html.1.50.html">Contribution Guide</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="index.html"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="index.html.1.4.html"><span itemprop="name">Resources</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="index.html.1.40.html"><span itemprop="name">Whitepaper 2.0</span></a><meta itemprop="position" content="2"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Beyond AI - A Modular + ZK Rollup Blockchain</span><meta itemprop="position" content="3"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>aelf as a modular blockchain</h1>
<p><img decoding="async" loading="lazy" alt="aelf as a modular blockchain" src="chapter7-d81feaaf1322b4b73c14ece2c3faf523.png" title="aelf as a modular blockchain" width="1690" height="845" class="img_ev3q"></p>
<p>A <a href="https://volt.capital/blog/modular-blockchains" target="_blank" rel="noopener noreferrer">modular blockchain</a> is a design approach that focuses on handling a limited set of responsibilities while outsourcing the rest to one or more independent layers. It decomposes the various tasks or functions of a blockchain into distinct layers or modules. This segregation allows for improved performance, scalability, and customisation.</p>
<p><strong>Execution Layer:</strong> This layer is where transactions and state changes occur, such as modifying wallet balances. Users interact with this layer through transaction operations, currency transfers, and smart contract deployments.</p>
<p><strong>Settlement Layer:</strong> An optional layer in Modular Blockchain, it is responsible for verifying and settling rollup transactions. Rollup transactions are a technique that bundles multiple transactions into a single one for improved efficiency.</p>
<p><strong>Consensus Layer:</strong> This layer provides ordering and finality through a network of full nodes. These full nodes download and execute block contents, reaching a consensus on the validity of state transitions.</p>
<p><strong>Data Availability Layer:</strong> This layer contains data that has already been confirmed as valid. It ensures that the data required for verifying state transitions is available and easily verifiable.</p>
<p>By separating these tasks, a modular blockchain enables independent optimisation of each layer, leading to significant improvements across layers. This results in a more scalable, composable, and decentralised system. This is why Modular Blockchain is often considered the future of blockchain technology.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-present-status-of-aelf">The present status of aelf<a class="hash-link" aria-label="Direct link to The present status of aelf" title="Direct link to The present status of aelf" href="index.html.1.116.html#the-present-status-of-aelf">​</a></h2>
<p>As elaborated before, aelf operates on a mainchain-sidechain architecture. Its sidechains resemble the consumer chains of Cosmos or the parachains of Polkadot. Similar to these platforms, aelf decouples functionality at the code level — a modular or deconstructed approach rooted in software engineering principles. The primary objectives of this architecture are to facilitate the development of modular plugins within the aelf ecosystem and to enable the loading of various modules in a pluggable manner, thereby enhancing aelf&#x27;s scalability and flexibility. For instance, the consensus functionality can be treated as a pluggable/replaceable code package, making it convenient for developers to customise.</p>
<p>Notwithstanding the aforementioned points, the current mainchain-sidechain architecture of aelf experiences performance bottlenecks, particularly in terms of its TPS capacity. aelf will be introducing a new Layer 2 chain utilising <a href="https://ethereum.org/en/developers/docs/scaling/zk-rollups/" target="_blank" rel="noopener noreferrer">ZK Rollup technology</a> that would considerably enhance aelf&#x27;s performance, scalability, and compatibility with the Ethereum Virtual Machine (EVM).</p>
<p>Consequently, we have initiated the <strong>Modular + ZK Rollup project</strong> to address these challenges.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-aelf-solution">The aelf solution<a class="hash-link" aria-label="Direct link to The aelf solution" title="Direct link to The aelf solution" href="index.html.1.116.html#the-aelf-solution">​</a></h2>
<p>We are building a ZK-rollup on aelf, based on the <a href="https://polygon.technology/polygon-cdk#" target="_blank" rel="noopener noreferrer">Polygon CDK</a>, operating in the validium mode. Its primary components include:</p>
<ol>
<li><strong><a href="index.html.1.116.html#zkevm--zkprover">Executor/Verifier</a>:</strong> zkEVM / ZKProver</li>
<li><strong><a href="index.html.1.116.html#data-availability">Data Availability</a>:</strong> External DA + Data Availability Committee (DAC)</li>
<li><strong><a href="index.html.1.116.html#consensus-contract">Consensus</a>:</strong> On-chain Smart Contracts</li>
<li><strong><a href="index.html.1.116.html#sequencer">Sequencer</a></strong></li>
<li><strong><a href="index.html.1.116.html#bridge">Bridge</a></strong></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="verification-process">Verification Process<a class="hash-link" aria-label="Direct link to Verification Process" title="Direct link to Verification Process" href="index.html.1.116.html#verification-process">​</a></h3>
<p>The aelf ZK-rollup utilises Polygon CDK, an advanced open-source framework designed for rapidly deploying ZK-powered Layer 2 (L2) blockchains on Ethereum, with significant adaptation and optimisation efforts.</p>
<p>Operating in the validium mode while maintaining seamless interoperability with all other EVM chains, aelf ZK-rollup offers a high-performance Layer 2 scaling solution. As transaction data is not stored on the aelf mainnet but executed and stored off-chain, this significantly enhances scalability. Validium, under the premise of ensuring security, reduces L1 gas storage costs, thereby lowering transaction costs for users on Layer 2 while significantly improving user privacy and experience.</p>
<p>Unlike traditional rollups and sidechains, aelf ZK-rollup only shares proofs of validity, which are used to confirm transaction outcomes with Layer 1, rather than the actual executed transaction data. Its operation works as follows: A verifier smart contract is deployed on aelf Layer 1, and validium submits proofs of validity to this contract. These proofs, inherently zero-knowledge, contain transaction results without revealing specific transaction data.</p>
<p>The verifier smart contract assesses the validity of the proofs. Should any batch submitted by validium be found invalid, it will be rejected and not stored on the aelf Layer 1.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="consensus-contract">Consensus Contract<a class="hash-link" aria-label="Direct link to Consensus Contract" title="Direct link to Consensus Contract" href="index.html.1.116.html#consensus-contract">​</a></h3>
<p>ZkEVM.cs is the underlying protocol that ensures the correctness of state changes by using validity proofs. To confirm adherence to specific predefined rules for state transitions, the consensus contract (ZkEVM.cs, deployed on aelf Layer 1) comes into play.</p>
<p>ZkEVM.cs is responsible for verifying validity proofs to confirm that each transaction has been executed correctly, using ZK-SNARK circuits for validation. For the system to function properly, two key processes are involved: <strong>transaction batching</strong> and <strong>transaction verification</strong>. To carry out these processes, aelf ZK-rollup involves two types of participants: <strong>sequencers</strong> and <strong>aggregators</strong>.</p>
<ol>
<li><strong>Sequencer:</strong> Proposes transaction batches to the network, grouping and adding transaction requests to ZkEVM.cs.</li>
<li><strong>Aggregator:</strong> Reviews the validity of transaction batches and provides necessary validity proofs. Permissionless aggregators can submit these proofs to attest to the accuracy of state transition computations.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-availability">Data Availability<a class="hash-link" aria-label="Direct link to Data Availability" title="Direct link to Data Availability" href="index.html.1.116.html#data-availability">​</a></h3>
<p>aelf ZK-rollup&#x27;s validium mode incorporates a secure data availability layer managed by the DAC, which:</p>
<ol>
<li>Verifies the availability of data associated with specific blockchain blocks; and</li>
<li>Ensures data robustness and computational efficiency for aelf ZK-rollup.</li>
</ol>
<p>Advantages of DAC include:</p>
<ol>
<li>reduce transaction fees; less computation equals lower costs.</li>
<li>state privacy; maintaining secure records of state changes for data integrity.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aelf-zk-rollup-node">aelf ZK-rollup Node<a class="hash-link" aria-label="Direct link to aelf ZK-rollup Node" title="Direct link to aelf ZK-rollup Node" href="index.html.1.116.html#aelf-zk-rollup-node">​</a></h3>
<p>aelf ZK-rollup Node is used to process transactions, synchronises states, generates, and submits proofs. Sequencers and aggregators manage L2 state and finality on L1.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="zkevm--zkprover">zkEVM / ZKProver<a class="hash-link" aria-label="Direct link to zkEVM / ZKProver" title="Direct link to zkEVM / ZKProver" href="index.html.1.116.html#zkevm--zkprover">​</a></h4>
<p>One of the core functionalities of aelf ZK-rollup&#x27;s nodes is its zkEVM and ZKProver. The general operation flow is as follows: zkEVM / ZKProver receives a large batch of transactions from Layer 2, executes the transactions, and utilises ZK (Zero-Knowledge) technology to generate zero-knowledge proofs. The proof generation process is outlined below:</p>
<ol>
<li>The node sends the contents of the Merkle tree to the database for storage.</li>
<li>Subsequently, the node sends a batch of transactions to the ZKProver component.</li>
<li>ZKProver accesses the database and retrieves necessary information to generate verifiable proofs for the transactions sent by the node. This information includes the Merkle root, keys, and hash values of relevant sibling nodes.</li>
<li>Finally, ZKProver generates proofs for the transactions and sends them back to the node.</li>
</ol>
<p><img decoding="async" loading="lazy" src="7.1-f929a0aa3d50ce9743a18f1b7c501ae2.png" width="2272" height="1248" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="sequencer">Sequencer<a class="hash-link" aria-label="Direct link to Sequencer" title="Direct link to Sequencer" href="index.html.1.116.html#sequencer">​</a></h4>
<p>The Sequencer is responsible for ordering transactions and constantly updating the global state:</p>
<ol>
<li><strong>Transaction Ordering</strong>: Retrieves transactions from the pool and adds them to the state.</li>
<li><strong>State Transition</strong>: Collaborates with the Executor to process transactions and update the state.</li>
<li><strong>Trustworthy Finality</strong>: Once the Sequencer adds a transaction to the state, it shares this information with other nodes, making the transaction final. Other nodes need to trust that the transaction has been added to the state until they receive data availability (DA) and validity (ZKP) confirmations, as detailed below in <strong><a href="index.html.1.116.html#transaction-journey-on-aelf-zk-rollup">Transaction Journey on aelf ZK-Rollup</a>.</strong></li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="aggregator">Aggregator<a class="hash-link" aria-label="Direct link to Aggregator" title="Direct link to Aggregator" href="index.html.1.116.html#aggregator">​</a></h4>
<p>The Aggregator is responsible for submitting proofs of the validity of the Layer 2 state to Layer 1. To achieve this, it takes batches ordered by the Sequencer and interacts with Provers to generate Zero-Knowledge Proofs (ZKPs). To efficiently accomplish this, the Aggregator will:</p>
<ol>
<li>Coordinate with one or more Provers</li>
<li>Aggregate proofs for multiple batches, where a single proof can validate multiple batches</li>
</ol>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bridge">Bridge<a class="hash-link" aria-label="Direct link to Bridge" title="Direct link to Bridge" href="index.html.1.116.html#bridge">​</a></h4>
<p>Token asset access and contract invocations (message passing) between aelf&#x27;s Layer 2 and Layer 1 are facilitated through the zkEVM Bridge smart contract. It achieves network interoperability by utilising two distinct Global Exit Tree Root managers on Layer 1 and Layer 2, along with the bridging smart contract (ZkEVMBridge.cs).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="gas-fees"><strong>Gas Fees</strong><a class="hash-link" aria-label="Direct link to gas-fees" title="Direct link to gas-fees" href="index.html.1.116.html#gas-fees">​</a></h4>
<p>aelf ZK-rollup involves two primary participants who both earn and pay ELF tokens as gas fee.</p>
<p><strong>Sequencer:</strong></p>
<p>- Pays gas fees for creating and proposing batches.</p>
<p>- Receives fees paid by transaction requesters or network users as rewards when successfully proposing valid batches containing valid transactions.</p>
<p><strong>Aggregator:</strong></p>
<p>- Validates transactions proposed and batched by the Sequencer.</p>
<p>- Runs on the aelf ZK-rollup&#x27;s ZKNode software and utilises ZKProver to create zero-knowledge validity proofs.</p>
<p>- Provides validity proofs to verify transactions, earning ELF fees paid by the Sequencer for each successful verification.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="transaction-journey-on-aelf-zk-rollup">Transaction Journey on aelf ZK-rollup<a class="hash-link" aria-label="Direct link to Transaction Journey on aelf ZK-rollup" title="Direct link to Transaction Journey on aelf ZK-rollup" href="index.html.1.116.html#transaction-journey-on-aelf-zk-rollup">​</a></h3>
<p>Before conducting Layer 2 transactions, users need to transfer some ELF from L1 to L2 through the aelf ZK-rollup bridge for gas fees. The subsequent steps are as follows:</p>
<ol>
<li>Users initiate a transaction from their wallet (e.g. <a href="https://portkey.finance/" target="_blank" rel="noopener noreferrer">Portkey</a>) and send it to the Sequencer.</li>
<li>Once the Sequencer commits to adding the transaction, it is finalised on L2.</li>
<li>At this point, the transaction is settled on L2, but its state has not yet propagated to L1. This state is known as the <strong>Pre-validated State</strong>.</li>
<li>The Sequencer transfers batch data to a smart contract on L1, allowing any node to safely and trustlessly synchronise its state from L1. This state is called the <strong>Committed State</strong>.</li>
<li>The Aggregator collects pending transactions for validation and constructs proofs to achieve finality on L1.</li>
<li>Once the proofs are verified, the user&#x27;s transaction achieves finality on L1, a crucial step for withdrawals and other operations. This state is referred to as the <strong>Verified State</strong>.</li>
</ol></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="index.html.1.120.html"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Developer and user experience</div></a><a class="pagination-nav__link pagination-nav__link--next" href="index.html.1.117.html"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Roadmap</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="index.html.1.116.html#the-present-status-of-aelf">The present status of aelf</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.116.html#the-aelf-solution">The aelf solution</a><ul><li><a class="table-of-contents__link toc-highlight" href="index.html.1.116.html#verification-process">Verification Process</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.116.html#consensus-contract">Consensus Contract</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.116.html#data-availability">Data Availability</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.116.html#aelf-zk-rollup-node">aelf ZK-rollup Node</a></li><li><a class="table-of-contents__link toc-highlight" href="index.html.1.116.html#transaction-journey-on-aelf-zk-rollup">Transaction Journey on aelf ZK-rollup</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col mobile-hidden"><img src="Logo.aelf.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="Logo.aelf.white.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="col footer__col"><div class="footer__title">Platform</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aelf.com/platform" target="_blank" rel="noopener noreferrer" class="footer__link-item">Technology<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://github.com/AElfProject/aelf-audit-reports" target="_blank" rel="noopener noreferrer" class="footer__link-item">Audit Report<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.41.html">Privacy</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.42.html">Terms of Use</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.43.html">Cookie Policy</a></li></ul></div><div class="col footer__col"><div class="footer__title">Developer Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="index.html.1.html">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.1.html">Learn</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.2.html">Tools</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.3.html">Playground</a></li><li class="footer__item"><a class="footer__link-item" href="index.html.1.4.html">Resources</a></li></ul></div><div class="col footer__col"><div class="footer__title">Ecosystem</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://aelf.com/ecosystem" target="_blank" rel="noopener noreferrer" class="footer__link-item">Overview<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aelf.com/ecosystem#ECOSYSTEM_DAPPS" target="_blank" rel="noopener noreferrer" class="footer__link-item">dApps<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://aelf.com/ecosystem#ECOSYSTEM_VENTURES" target="_blank" rel="noopener noreferrer" class="footer__link-item">aelf Ventures<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://blog.aelf.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://form.aelf.com/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact Us<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="wrap_IVJr"><div class="copyright_C3yV"><div class="logo_fd3v"><img src="Logo.aelf.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="Logo.aelf.white.svg" alt="aelf" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class="footer__copyright">Copyright © 2024 aelf</div></div><div class="social_cKnr"><a href="https://x.com/aelfblockchain" target="_blank" rel="noopener noreferrer" title="X"><img src="X.svg" class="img_LYnW"></a><a href="https://t.me/aelfblockchain" target="_blank" rel="noopener noreferrer" title="Telegram"><img src="Telegram.svg" class="img_LYnW"></a><a href="https://discord.gg/bgysa9xjvD" target="_blank" rel="noopener noreferrer" title="Discord"><img src="Discord.svg" class="img_LYnW"></a><a href="https://github.com/AElfProject" target="_blank" rel="noopener noreferrer" title="GitHub"><img src="Github.svg" class="img_LYnW"></a></div></div></div></div></footer></div>
</body>
</html>